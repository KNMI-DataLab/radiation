<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Linestring Noder</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for gNode {rgeos}"><tr><td>gNode {rgeos}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Linestring Noder</h2>

<h3>Description</h3>

<p>Function attempts to node a linestring object, inserting coordinates at intersection points; only available for GEOS &gt;= 3.4.0.</p>


<h3>Usage</h3>

<pre>
	gNode(spgeom);
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>spgeom</code></td>
<td>
<p>an sp object inheriting from SpatialLines</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Because <code><a href="topo-unary-gPolygonize.html">gPolygonize</a></code> expects linestrings to be fully noded, as such they must not cross and must touch only at endpoints. <code>gNodee</code> takes an object inheriting from <code>SpatialLines</code> and attempts to add omitted nodes. Issue reported by Nicola Farina 21 March 2014.</p>


<h3>Value</h3>

<p>Returns a noded linestring object.</p>


<h3>Author(s)</h3>

<p>Roger Bivand</p>


<h3>See Also</h3>

<p><code><a href="topo-unary-gPolygonize.html">gPolygonize</a></code></p>


<h3>Examples</h3>

<pre>
library(sp)
pol1 &lt;- readWKT(paste("POLYGON((39.936 43.446, 39.94 43.446, 39.94 43.45,",
 "39.936 43.45, 39.936 43.446))"))
pol2 &lt;- readWKT(paste("POLYGON((39.9417 43.45, 39.9395 43.4505,",
 "39.9385 43.4462, 39.9343 43.4452, 39.9331 43.4469, 39.9417 43.45))"))
plot(pol2, axes=TRUE)
plot(pol1, add=TRUE, border="blue")
gIsValid(pol1)
gIsValid(pol2)
try(res &lt;- gUnion(pol1, pol2))
if (version_GEOS0() &gt; "3.4.0") {
pol2a &lt;- gPolygonize(gNode(as(pol2, "SpatialLines")))
try(res &lt;- gUnion(pol1, pol2a))
plot(res, add=TRUE, border="red", lty=2, lwd=2)
set.seed(1)
# rw from Jim Holtman's R-help posting 2010-12-2
n &lt;- 1000
rw &lt;- matrix(0, ncol = 2, nrow = n)
indx &lt;- cbind(seq(n), sample(c(1, 2), n, TRUE))
rw[indx] &lt;- sample(c(-1, 1), n, TRUE)
rw[,1] &lt;- cumsum(rw[, 1])
rw[, 2] &lt;- cumsum(rw[, 2])
slrw &lt;- SpatialLines(list(Lines(list(Line(rw)), "1")))
res0 &lt;- gNode(slrw)
print(length(slrw))
print(length(res0))
res &lt;- gPolygonize(res0)
print(summary(res))
print(length(res))
plot(res0, axes=TRUE)
plot(res, add=TRUE, col=sample(rainbow(length(res))))
# library(spatstat)
# set.seed(0)
# X &lt;- psp(runif(100), runif(100), runif(100), runif(100), window=owin())
# library(maptools)
# sppsp &lt;- as(X, "SpatialLines")
# writeLines(writeWKT(sppsp, byid=FALSE), con="sppsp.wkt")
sppsp &lt;- readWKT(readLines(system.file("wkts/sppsp.wkt", package="rgeos")))
plot(sppsp, axes=TRUE)
res0 &lt;- gNode(sppsp)
res &lt;- gPolygonize(res0)
plot(res, add=TRUE, col=sample(rainbow(length(res))))
}
</pre>

<hr /><div style="text-align: center;">[Package <em>rgeos</em> version 0.3-20 <a href="00Index.html">Index</a>]</div>
</body></html>
