<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Download, reproject, and mosaic Modis satellite images</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for ModisDownload {rts}"><tr><td>ModisDownload {rts}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Download, reproject, and mosaic Modis satellite images</h2>

<h3>Description</h3>

<p>'ModisDownload' downloads a series of MODIS images in a specific date or a period of times, and for specified tile(s). It can also use MODIS Reproject Tool (MRT) software to mosaic the downloaded images, in case of selecting more than one tile, and reproject them to a specified coordinate system. As the format of the source images in LP DAAC is HDF, this tool can also convert them into other formats (i.e. Geotif, hdr).
</p>


<h3>Usage</h3>

<pre>
ModisDownload(x,h,v,dates, ...)

getMODIS(x,h,v,dates,version='005')

mosaicHDF(hdfNames,filename,MRTpath,bands_subset,delete=FALSE)

reprojectHDF(hdfName,filename,MRTpath, ...)

modisProducts()
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p> product name or a number specifies the product row in the data.frame generated by <code>modisProduct</code> function. It can also be the http address of the product.</p>
</td></tr>
<tr valign="top"><td><code>h</code></td>
<td>
<p> together with <code>v</code> specify the position of the Modis image tile(s). Examples: h=15; h=c(14,15); v=c(4:7) </p>
</td></tr>
<tr valign="top"><td><code>v</code></td>
<td>
<p> see the above descriptopn for <code>h</code> </p>
</td></tr>
<tr valign="top"><td><code>dates</code></td>
<td>
<p> logical. Only relevant if more than one tile is selected</p>
</td></tr>
<tr valign="top"><td><code>hdfName</code></td>
<td>
<p>the name of hdf file</p>
</td></tr>
<tr valign="top"><td><code>hdfNames</code></td>
<td>
<p>the names of hdf files</p>
</td></tr>
<tr valign="top"><td><code>MRTpath</code></td>
<td>
<p>Path to the bin folder into the installed directory of MRT software. It is needed only if you need to mosaic and/or reproject the images. Example: MRTpath=&quot;d:/MRT/bin&quot;</p>
</td></tr>
<tr valign="top"><td><code>filename</code></td>
<td>
<p> the name of new file</p>
</td></tr>
<tr valign="top"><td><code>version</code></td>
<td>
<p> the product version. The default value is '005'</p>
</td></tr>
<tr valign="top"><td><code>bands_subset</code></td>
<td>
<p>HDF-EOS input files contain several layers of data (bands). Through this argument you ca select a subset of bands. You need to know how many bands the product has, and which bands you want to be subset. Example: Suppose your image has 6 bands and you only need the second band. The parameter should be entered as: bands_subset=&quot;0 1 0 0 0 0&quot;.</p>
</td></tr>
<tr valign="top"><td><code>delete</code></td>
<td>
<p> Logical. If <code>TRUE</code>, the original HDF files will be deleted after mosaic or reproject into new files.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p> additional arguments including:
</p>
<p>- <code>mosaic</code>: logical, if <code>TRUE</code>, the images (several tiles) are mosaic into a single image
</p>
<p>- <code>proj</code>: Logical. If <code>TRUE</code>, it means that you want to reproject the images. Then reprojectHDF function will be called to reproject the images. 
</p>
<p>- <code>UL</code>: Optional. Upper Left coordinate (x,y) in output coordinate system. Only if you want to spatially subset your images.
</p>
<p>- <code>LR</code>: Optional. Lower right coordinate(x,y). Only if you want to spatially subset your images.
</p>
<p>- <code>resample_type</code>: Resampling kernel type (&quot;CUBIC_CONVOLUTION&quot;, &quot;NEAREST_NEIGHBOR&quot;, or &quot;BILINEAR&quot;). The default is &quot;NEAREST_NEIGHBOR&quot;.
</p>
<p>- <code>proj_type</code>: Output projection short name. Valid values are &quot;AEA&quot; (Albers EqualArea), &quot;ER&quot; (Equirectangular), &quot;GEO&quot; (Geographic), &quot;IGH&quot; (Interrupted Goode Homolosine), &quot;HAM&quot; (Hammer), &quot;ISIN&quot; (Integerized Sinusoidal), &quot;LA&quot; (Lambert Azimuthal Equal Area), &quot;LCC&quot; (Lambert Conformal Conic), &quot;MERCAT&quot; (Mercator), &quot;MOL&quot; (Molleweide), &quot;PS&quot; (Polar Stereographic), &quot;SIN&quot; (Sinusoidal), &quot;TM&quot; (Transverse Mercator), and &quot;UTM&quot; (Universal Transverse Mercator).
</p>
<p>- <code>proj_params</code>: Output projection parameters. This quoted, floating-point list includes up to 15 projection parameters, with each value separated by white space (&quot;p1 p2 ... p15&quot;). If there are fewer than 15 values specified in the list, the remaining values will be set to zero. Integer values will automatically be converted to floating point (See the MRT software manual for the details).
</p>
<p>- <code>datum</code>: Specifies the output projection datum. The default is &quot;WGS84&quot;
</p>
<p>- <code>utm_zone</code>: Valid only if &quot;UTM&quot; is selected for the proj_type.
</p>
<p>- <code>pixel_size</code>: Output pixel size.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To have the functionality for Mosaic and reprojecting of the images, you need to first install MRT software on your machine, and introduce its' path through the MRTpath argument. Otherwise, it can only be used for automating the downloading procedure.
</p>
<p>The functions <code>ModisDownload</code> uses the functions including  <code>getMODIS</code>, <code>mosaicHDF</code>  (if needed), and <code>reprojectHDF</code>  (if needed). The functions <code>getMODIS</code>, can be used to download HDF files, while  <code>mosaicHDF</code> and <code>reprojectHDF</code> can mosaic and reproject the HDF files, respectively.
</p>


<h3>Author(s)</h3>

<p>Babak Naimi
</p>
<p><a href="mailto:naimi.b@gmail.com">naimi.b@gmail.com</a>
</p>
<p><a href="http://r-gis.net">http://r-gis.net</a>
</p>


<h3>Examples</h3>

<pre>

#library(raster)

#library(RCurl)

 

# product list:

#modisProducts( )

#x=3 # or x="MOD14A1"

# download 4 tiles (h14v04, h14v05, h15v04, h15v05) in single date (2011.05.01)

# Following command only downloads the source HDF images, no mosaic and no projection

#ModisDownload(x=x,h=c(17,18),v=c(4,5),dates='2011.05.01',mosaic=F,proj=F)

 
# alternatively, you can use modisHDF to download only HDF images:

#modisHDF(x=x,h=c(17,18),v=c(4,5),dates='2011.05.01')

# same as the above command, but downloads all available images in 2011:

#ModisDownload(x=x,h=c(17,18),v=c(4,5),dates=c('2011.01.01','2011.12.31'))

#------

# Downloads selected tiles, and mosaic them, but no projections:

#ModisDownload(x=x,h=c(17,18),v=c(4,5),dates=c('2011.05.01','2011.05.31'),MRTpath='d:/MRT/bin',
#mosaic=T,proj=F)

#--- alternatively, you can first download the HDF images using getMODIS, 
#and then mosaic them using mosaicHDF!

# Downloads selected tiles, and mosaic, reproject them in UTM_WGS84, zone 30 projection and 
#convert all bands into Geotif format (the original HDF will be deleted!):

#ModisDownload(x=x,h=c(17,18),v=c(4,5),dates=c('2011.05.01','2011.05.31'),MRTpath='d:/MRT/bin',
#mosaic=T,proj=T,proj_type="UTM",utm_zone=30,datum="WGS84",pixel_size=1000)

# Same as above command, but only second band out of 6 bands will be kept. (You do not need 
#to specify proj_params when "UTM" is selected as proj_type and the zone also is specified,
#but for other types of projections you do).

#ModisDownload(x=x,h=c(17,18),v=c(4,5),dates=c('2011.05.01','2011.05.31'),MRTpath='d:/MRT/bin',
#mosaic=T,proj=T, bands_subset="0 1 0 0 0 0", proj_type="UTM",
#proj_params="-3 0 0 0 0 0 0 0 0 0 0 0 0 0 0",utm_zone=30,datum="WGS84",pixel_size=1000)

 
# Same as above command, but it spatially subsets the images into the specified box (UL and LR):

#ModisDownload(x=x,h=c(17,18),v=c(4,5),dates=c('2011.05.01','2011.05.31'),MRTpath='d:/MRT/bin',
#mosaic=T,proj=T,UL=c(-42841.0,4871530.0),LR=c(1026104,3983860), bands_subset="0 1 0 0 0 0", 
#proj_type="UTM",proj_params="-3 0 0 0 0 0 0 0 0 0 0 0 0 0 0",utm_zone=30,datum="WGS84",
#pixel_size=1000)

</pre>

<hr /><div style="text-align: center;">[Package <em>rts</em> version 1.0-12 <a href="00Index.html">Index</a>]</div>
</body></html>
