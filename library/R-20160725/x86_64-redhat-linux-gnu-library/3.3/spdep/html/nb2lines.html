<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Use arc-type shapefiles for import and export of weights</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for nb2lines {spdep}"><tr><td>nb2lines {spdep}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Use arc-type shapefiles for import and export of weights</h2>

<h3>Description</h3>

<p>Use arc-type shapefiles for import and export of weights, storing spatial entity coordinates in the arcs, and the entity indices in the data frame.
</p>


<h3>Usage</h3>

<pre>
nb2lines(nb, wts, coords, proj4string=CRS(as.character(NA)))
listw2lines(listw, coords, proj4string=CRS(as.character(NA)))
df2sn(df, i="i", i_ID="i_ID", j="j", wt="wt")
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>nb</code></td>
<td>
<p>a neighbour object of class <code>nb</code></p>
</td></tr>
<tr valign="top"><td><code>wts</code></td>
<td>
<p>list of general weights corresponding to neighbours</p>
</td></tr>
<tr valign="top"><td><code>coords</code></td>
<td>
<p>matrix of region point coordinates</p>
</td></tr>
<tr valign="top"><td><code>proj4string</code></td>
<td>
<p>Object of class CRS; holding a valid proj4 string</p>
</td></tr>
<tr valign="top"><td><code>listw</code></td>
<td>
<p>a <code>listw</code> object of spatial weights</p>
</td></tr>
<tr valign="top"><td><code>df</code></td>
<td>
<p>a data frame read from a shapefile, derived from the output of <code>nb2lines</code></p>
</td></tr>
<tr valign="top"><td><code>i</code></td>
<td>
<p>character name of column in df with from entity index</p>
</td></tr>
<tr valign="top"><td><code>i_ID</code></td>
<td>
<p>character name of column in df with from entity region ID</p>
</td></tr>
<tr valign="top"><td><code>j</code></td>
<td>
<p>character name of column in df with to entity index</p>
</td></tr>
<tr valign="top"><td><code>wt</code></td>
<td>
<p>character name of column in df with weights</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The maptools package function <code>writeSpatialShape</code> is used to transport out the list of lines made by <code>nb2lines</code> or <code>listw2lines</code>, which is a simple wrapper function. The neighbour and weights objects may be retrieved by converting the specified columns of the data slot of the SpatialLinesDataFrame object into a spatial.neighbour object, which is then converted into a weights list object.
</p>


<h3>Value</h3>

<p><code>nb2lines</code> and <code>listw2lines</code> return a SpatialLinesDataFrame object; its data slot contains a data frame with the from and to indices of the neighbour links and their weights. <code>df2sn</code> converts the data retrieved from reading the data from <code>df</code> back into a <code>spatial.neighbour</code> object.
</p>


<h3>Note</h3>

<p>Original idea due to Gidske Leknes Andersen, Department of Biology, University of Bergen, Norway</p>


<h3>Author(s)</h3>

<p>Roger Bivand <a href="mailto:Roger.Bivand@nhh.no">Roger.Bivand@nhh.no</a></p>


<h3>See Also</h3>

<p><code><a href="listw2sn.html">sn2listw</a></code>, <code><a href="../../maptools/html/readShapeLines.html">readShapeLines</a></code></p>


<h3>Examples</h3>

<pre>
require(maptools)
example(columbus)
coords &lt;- coordinates(columbus)
res &lt;- listw2lines(nb2listw(col.gal.nb), coords)
summary(res)
fn &lt;- paste(tempdir(), "nbshape", sep="/")
writeLinesShape(res, fn=fn)
inMap &lt;- readShapeLines(fn)
summary(inMap)
diffnb(sn2listw(df2sn(as(inMap, "data.frame")))$neighbours, col.gal.nb)
</pre>

<hr /><div style="text-align: center;">[Package <em>spdep</em> version 0.6-6 <a href="00Index.html">Index</a>]</div>
</body></html>
