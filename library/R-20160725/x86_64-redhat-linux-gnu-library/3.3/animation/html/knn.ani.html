<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Demonstration of the k-Nearest Neighbour classification</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for knn.ani {animation}"><tr><td>knn.ani {animation}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Demonstration of the k-Nearest Neighbour classification</h2>

<h3>Description</h3>

<p>Demonstrate the process of k-Nearest Neighbour classification on the 2D
plane.
</p>


<h3>Usage</h3>

<pre>
knn.ani(train, test, cl, k = 10, interact = FALSE, tt.col = c("blue", "red"), 
    cl.pch = seq_along(unique(cl)), dist.lty = 2, dist.col = "gray", knn.col = "green", 
    ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>train</code></td>
<td>
<p>matrix or data frame of training set cases containing only 2
columns</p>
</td></tr>
<tr valign="top"><td><code>test</code></td>
<td>
<p>matrix or data frame of test set cases. A vector will be
interpreted as a row vector for a single case. It should also contain only
2 columns. This data set will be <em>ignored</em> if <code>interact = TRUE</code>;
see <code>interact</code> below.</p>
</td></tr>
<tr valign="top"><td><code>cl</code></td>
<td>
<p>factor of true classifications of training set</p>
</td></tr>
<tr valign="top"><td><code>k</code></td>
<td>
<p>number of neighbours considered.</p>
</td></tr>
<tr valign="top"><td><code>interact</code></td>
<td>
<p>logical. If <code>TRUE</code>, the user will have to choose a test
set for himself using mouse click on the screen; otherwise compute kNN
classification based on argument <code>test</code>.</p>
</td></tr>
<tr valign="top"><td><code>tt.col</code></td>
<td>
<p>a vector of length 2 specifying the colors for the training
data and test data.</p>
</td></tr>
<tr valign="top"><td><code>cl.pch</code></td>
<td>
<p>a vector specifying symbols for each class</p>
</td></tr>
<tr valign="top"><td><code>dist.lty, dist.col</code></td>
<td>
<p>the line type and color to annotate the distances</p>
</td></tr>
<tr valign="top"><td><code>knn.col</code></td>
<td>
<p>the color to annotate the k-nearest neighbour points using a
polygon</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>additional arguments to create the empty frame for the animation
(passed to <code><a href="../../graphics/html/plot.default.html">plot.default</a></code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For each row of the test set, the <i>k</i> nearest (in Euclidean distance)
training set vectors are found, and the classification is decided by majority
vote, with ties broken at random. For a single test sample point, the basic
steps are:
</p>
 <ol>
<li><p> locate the test point </p>
</li>
<li><p> compute the distances between
the test point and all points in the training set </p>
</li>
<li><p> find <i>k</i> shortest
distances and the corresponding training set points </p>
</li>
<li><p> vote for the result
(find the maximum in the table for the true classifications) </p>
</li></ol>

<p>As there are four steps in an iteration, the total number of animation frames
should be <code>4 * min(nrow(test), ani.options('nmax'))</code> at last.
</p>


<h3>Value</h3>

<p>A vector of class labels for the test set.
</p>


<h3>Note</h3>

<p>There is a special restriction (only two columns) on the training and
test data set just for sake of the convenience for making a scatterplot.
This is only a rough demonstration; for practical applications, please
refer to existing kNN functions such as <code><a href="../../class/html/knn.html">knn</a></code> in
<span class="pkg">class</span>, etc.
</p>
<p>If either one of <code>train</code> and <code>test</code> is missing, there'll be
random matrices prepared for them. (It's the same for <code>cl</code>.)
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p>Venables, W. N. and Ripley, B. D. (2002) <em>Modern Applied
Statistics with S</em>. Fourth edition. Springer.
</p>


<h3>See Also</h3>

<p><code><a href="../../class/html/knn.html">knn</a></code>
</p>


<h3>Examples</h3>

<pre>
## a binary classification problem
oopt = ani.options(interval = 2, nmax = ifelse(interactive(), 10, 2))
x = matrix(c(rnorm(80, mean = -1), rnorm(80, mean = 1)), ncol = 2, byrow = TRUE)
y = matrix(rnorm(20, mean = 0, sd = 1.2), ncol = 2)
knn.ani(train = x, test = y, cl = rep(c("first class", "second class"), 
    each = 40), k = 30)

x = matrix(c(rnorm(30, mean = -2), rnorm(30, mean = 2), rnorm(30, mean = 0)), 
    ncol = 2, byrow = TRUE)
y = matrix(rnorm(20, sd = 2), ncol = 2)
knn.ani(train = x, test = y, cl = rep(c("first", "second", "third"), 
    each = 15), k = 25, cl.pch = c(2, 3, 19), dist.lty = 3)

## an interactive demo: choose the test set by mouse-clicking
if (interactive()) {
    ani.options(nmax = 5)
    knn.ani(interact = TRUE)
}

## HTML page
saveHTML({
    ani.options(nmax = ifelse(interactive(), 10, 2), interval = 2)
    par(mar = c(3, 3, 1, 0.5), mgp = c(1.5, 0.5, 0))
    knn.ani(cl.pch = c(3, 19), asp = 1)
}, img.name = "knn_ani", htmlfile = "knn.ani.html", ani.height = 500, 
    ani.width = 600, title = "Demonstration for kNN Classification", 
    description = c("For each row of the test set", "the k nearest (in Euclidean", 
        "distance) training set vectors are found, and the classification is", 
        "decided by majority vote, with ties broken at random."))

ani.options(oopt)
</pre>

<hr /><div style="text-align: center;">[Package <em>animation</em> version 2.4 <a href="00Index.html">Index</a>]</div>
</body></html>
