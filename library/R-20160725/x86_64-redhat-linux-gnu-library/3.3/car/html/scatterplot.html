<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Scatterplots with Boxplots</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for scatterplot {car}"><tr><td>scatterplot {car}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Scatterplots with Boxplots</h2>

<h3>Description</h3>

<p>Makes enhanced scatterplots, with boxplots in the margins, a nonparametric regression smooth, 
smoothed conditional spread, outlier identification, and a regression line; 
<code>sp</code> is an abbreviation for <code>scatterplot</code>.
</p>


<h3>Usage</h3>

<pre>
scatterplot(x, ...)

## S3 method for class 'formula'
scatterplot(formula, data, subset, xlab, ylab, legend.title, legend.coords,
	labels, ...)

## Default S3 method:
scatterplot(x, y, 
    smoother=loessLine, smoother.args=list(), smooth, span,
    spread=!by.groups, reg.line=lm,
    boxplots=if (by.groups) "" else "xy",
    xlab=deparse(substitute(x)), ylab=deparse(substitute(y)), las=par("las"),
    lwd=1, lty=1,
    labels, id.method = "mahal", 
    id.n = if(id.method[1]=="identify") length(x) else 0, 
    id.cex = 1, id.col = palette()[1], id.location="lr",
    log="", jitter=list(), xlim=NULL, ylim=NULL,
    cex=par("cex"), cex.axis=par("cex.axis"), cex.lab=par("cex.lab"), 
    cex.main=par("cex.main"), cex.sub=par("cex.sub"), 
    groups, by.groups=!missing(groups), 
    legend.title=deparse(substitute(groups)), legend.coords, legend.columns,
    ellipse=FALSE, levels=c(.5, .95), robust=TRUE,
    col=if (n.groups == 1) palette()[3:1] else rep(palette(), length=n.groups),
    pch=1:n.groups, 
    legend.plot=!missing(groups), reset.par=TRUE, grid=TRUE, ...)

sp(x, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>vector of horizontal coordinates (or first argument of generic function).</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>vector of vertical coordinates.</p>
</td></tr>
<tr valign="top"><td><code>formula</code></td>
<td>
<p>a &ldquo;model&rdquo; formula, of the form <code>y ~ x</code> or 
(to plot by groups) <code>y ~ x | z</code>, where <code>z</code> evaluates to a factor 
or other variable dividing the data into groups. If <code>x</code> is a factor, then parallel boxplots
are produced using the <code><a href="Boxplot.html">Boxplot</a></code> function.</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>data frame within which to evaluate the formula.</p>
</td></tr>
<tr valign="top"><td><code>subset</code></td>
<td>
<p>expression defining a subset of observations.</p>
</td></tr>
<tr valign="top"><td><code>smoother</code></td>
<td>
<p>a function to draw a nonparametric-regression smooth; the default is <code><a href="ScatterplotSmoothers.html">loessLine</a></code>,
which does loess smoothing.  The function <code><a href="ScatterplotSmoothers.html">gamLine</a></code> fits a generalized additive model and
allows including a link and error function.
See <code><a href="ScatterplotSmoothers.html">ScatterplotSmoothers</a></code>.
Setting this argument to something other than a function, e.g., <code>FALSE</code> suppresses the smoother.</p>
</td></tr>
<tr valign="top"><td><code>smoother.args</code></td>
<td>
<p>a list of named values to be passed to the smoother function; the specified elements of the
list depend upon the smoother (see <code><a href="ScatterplotSmoothers.html">ScatterplotSmoothers</a></code>).</p>
</td></tr>
<tr valign="top"><td><code>smooth, span</code></td>
<td>
<p>these arguments are included for backwards compatility: 
if <code>smooth=TRUE</code> then <code>smoother</code> is set to <code>loessLine</code>,
and if <code>span</code> is specified, it is added to <code>smoother.args</code>.</p>
</td></tr>
<tr valign="top"><td><code>spread</code></td>
<td>
<p>if TRUE, estimate the (square root) of the variance function.  For <code>loessLine</code> and
for <code>gamLine</code>, this is done by separately smoothing the squares of the postive and negative
residuals from the mean fit, and then adding the square root of the fitted values to the mean fit.  For
<code>quantregLine</code>, fit the .25 and .75 quantiles with a quantile regression additive model.
The default is TRUE if <code>by.groups=FALSE</code> and FALSE is <code>by.groups=TRUE</code>.</p>
</td></tr>
<tr valign="top"><td><code>reg.line</code></td>
<td>
<p>function to draw a regression line on the plot
or <code>FALSE</code> not to plot a regression line.</p>
</td></tr>
<tr valign="top"><td><code>boxplots</code></td>
<td>
<p>if <code>"x"</code> a boxplot for <code>x</code> is drawn below the plot;
if <code>"y"</code> a boxplot for <code>y</code> is drawn to the left of the plot;
if <code>"xy"</code> both boxplots are drawn; set to <code>""</code> or <code>FALSE</code> to
suppress both boxplots.</p>
</td></tr>
<tr valign="top"><td><code>xlab</code></td>
<td>
<p>label for horizontal axis.</p>
</td></tr>
<tr valign="top"><td><code>ylab</code></td>
<td>
<p>label for vertical axis.</p>
</td></tr>
<tr valign="top"><td><code>las</code></td>
<td>
<p>if <code>0</code>, ticks labels are drawn parallel to the
axis; set to <code>1</code> for horizontal labels (see <code><a href="../../graphics/html/par.html">par</a></code>).</p>
</td></tr>
<tr valign="top"><td><code>lwd</code></td>
<td>
<p>width of linear-regression lines (default <code>1</code>).</p>
</td></tr>
<tr valign="top"><td><code>lty</code></td>
<td>
<p>type of linear-regression lines (default <code>1</code>, solid line).</p>
</td></tr>
<tr valign="top"><td><code>id.method,id.n,id.cex,id.col,id.location</code></td>
<td>
<p>Arguments for the labelling of
points.  The default is <code>id.n=0</code> for labeling no points.  See
<code><a href="showLabels.html">showLabels</a></code> for details of these arguments.  If the plot uses
different colors for groups, then the <code>id.col</code> argument is ignored and
label colors are determined by the <code>col</code> argument.</p>
</td></tr>
<tr valign="top"><td><code>labels</code></td>
<td>
<p>a vector of point labels; if absent, the function tries to determine reasonable
labels, and, failing that, will use observation numbers.</p>
</td></tr>
<tr valign="top"><td><code>log</code></td>
<td>
<p>same as the <code>log</code> argument to <code><a href="../../graphics/html/plot.html">plot</a></code>, to produce log axes.</p>
</td></tr>
<tr valign="top"><td><code>jitter</code></td>
<td>
<p>a list with elements <code>x</code> or <code>y</code> or both, specifying jitter factors
for the horizontal and vertical coordinates of the points in the scatterplot. The 
<code><a href="../../base/html/jitter.html">jitter</a></code> function is used to randomly perturb the points; specifying a
factor of <code>1</code> produces the default jitter. Fitted lines are unaffected by the jitter.</p>
</td></tr>
<tr valign="top"><td><code>xlim</code></td>
<td>
<p>the x limits (min, max) of the plot; if <code>NULL</code>, determined from the data.</p>
</td></tr>
<tr valign="top"><td><code>ylim</code></td>
<td>
<p>the y limits (min, max) of the plot; if <code>NULL</code>, determined from the data.</p>
</td></tr>
<tr valign="top"><td><code>groups</code></td>
<td>
<p>a factor or other variable dividing the data into groups; groups are
plotted with different colors and plotting characters.</p>
</td></tr>
<tr valign="top"><td><code>by.groups</code></td>
<td>
<p>if <code>TRUE</code>, regression lines are fit by groups.</p>
</td></tr>
<tr valign="top"><td><code>legend.title</code></td>
<td>
<p>title for legend box; defaults to the name of the groups variable.</p>
</td></tr>
<tr valign="top"><td><code>legend.coords</code></td>
<td>
<p>coordinates for placing legend; can be a list with components x and y to
specify the coordinates of the upper-left-hand corner of the legend; or a quoted keyword, such as <code>"topleft"</code>,
recognized by <code><a href="../../graphics/html/legend.html">legend</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>legend.columns</code></td>
<td>
<p>number of columns for the legend; if absent will be supplied automatically to
prefer horizontal legends when plotted above the graph.</p>
</td></tr>
<tr valign="top"><td><code>ellipse</code></td>
<td>
<p>if <code>TRUE</code> data-concentration ellipses are plotted.</p>
</td></tr>
<tr valign="top"><td><code>levels</code></td>
<td>
<p>level or levels at which concentration ellipses are plotted;
the default is <code>c(.5, .95)</code>.</p>
</td></tr>
<tr valign="top"><td><code>robust</code></td>
<td>
<p>if <code>TRUE</code> (the default) use the <code>cov.trob</code> function in the <code>MASS</code> package
to calculate the center and covariance matrix for the data ellipses.</p>
</td></tr>
<tr valign="top"><td><code>col</code></td>
<td>
<p>colors for lines and points; the default is taken from the color palette, 
with <code>palette()[3]</code> for linear regression lines, <code>palette()[2]</code> for nonparametric regression lines, and <code>palette()[1]</code> 
for points if there are
no groups, and successive colors for the groups if there are groups.</p>
</td></tr>
<tr valign="top"><td><code>pch</code></td>
<td>
<p>plotting characters for points; default is the plotting characters in
order (see <code><a href="../../graphics/html/par.html">par</a></code>).</p>
</td></tr>
<tr valign="top"><td><code>cex, cex.axis, cex.lab, cex.main, cex.sub</code></td>
<td>
<p>set sizes of various graphical elements; 
(see <code><a href="../../graphics/html/par.html">par</a></code>).</p>
</td></tr>
<tr valign="top"><td><code>legend.plot</code></td>
<td>
<p>if <code>TRUE</code> then a legend for the groups is plotted in the upper margin.</p>
</td></tr>
<tr valign="top"><td><code>reset.par</code></td>
<td>
<p>if <code>TRUE</code> then plotting parameters are reset to their previous values
when <code>scatterplot</code> exits; if <code>FALSE</code> then the <code>mar</code> and <code>mfcol</code> parameters are
altered for the current plotting device. Set to <code>FALSE</code> if you want to add graphical elements
(such as lines) to the plot.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>other arguments passed down and to <code>plot</code>.</p>
</td></tr>
<tr valign="top"><td><code>grid</code></td>
<td>
<p>If TRUE, the default, a light-gray background grid is put on the
graph</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If points are identified, their labels are returned; otherwise <code>NULL</code> is returned invisibly.
</p>


<h3>Author(s)</h3>

<p>John Fox <a href="mailto:jfox@mcmaster.ca">jfox@mcmaster.ca</a></p>


<h3>See Also</h3>

<p><code><a href="../../graphics/html/boxplot.html">boxplot</a></code>,
<code><a href="../../base/html/jitter.html">jitter</a></code>, <code><a href="../../graphics/html/legend.html">legend</a></code>,
<code><a href="scatterplotMatrix.html">scatterplotMatrix</a></code>, <code><a href="Ellipses.html">dataEllipse</a></code>, <code><a href="Boxplot.html">Boxplot</a></code>,
<code><a href="../../MASS/html/cov.trob.html">cov.trob</a></code>,
<code><a href="showLabels.html">showLabels</a></code>, <code><a href="ScatterplotSmoothers.html">ScatterplotSmoothers</a></code>.</p>


<h3>Examples</h3>

<pre>
scatterplot(prestige ~ income, data=Prestige, ellipse=TRUE)

if (interactive()){
scatterplot(prestige ~ income, data=Prestige, smoother=quantregLine)
}

scatterplot(prestige ~ income|type, data=Prestige, smoother=loessLine, 
    smoother.args=list(span=1))

scatterplot(prestige ~ income|type, data=Prestige, legend.coords="topleft")

scatterplot(vocabulary ~ education, jitter=list(x=1, y=1), 
	data=Vocab, id.n=0, smoother=FALSE)

scatterplot(infant.mortality ~ gdp, log="xy", data=UN, id.n=5)

scatterplot(income ~ type, data=Prestige)

	## Not run: 
scatterplot(infant.mortality ~ gdp, id.method="identify", data=UN)

scatterplot(infant.mortality ~ gdp, id.method="identify", smoother=loessLine, data=UN)
	
## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>car</em> version 2.1-3 <a href="00Index.html">Index</a>]</div>
</body></html>
