<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Getting/Setting RNGs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for getRNG {rngtools}"><tr><td>getRNG {rngtools}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Getting/Setting RNGs</h2>

<h3>Description</h3>

<p><code>getRNG</code> returns the Random Number Generator (RNG)
settings used for computing an object, using a suitable
<code>.getRNG</code> S4 method to extract these settings. For
example, in the case of objects that result from multiple
model fits, it would return the RNG settings used to
compute the best fit.
</p>
<p><code>hasRNG</code> tells if an object has embedded RNG data.
</p>
<p><code>.getRNG</code> is an S4 generic that extract RNG settings
from a variety of object types. Its methods define the
workhorse functions that are called by <code>getRNG</code>.
</p>
<p><code>getRNG1</code> is defined to provide separate access to
the RNG settings as they were at the very beginning of a
whole computation, which might differ from the RNG
settings returned by <code>getRNG</code>, that allows to
reproduce the result only.
</p>
<p><code>nextRNG</code> returns the RNG settings as they would be
after seeding with <code>object</code>.
</p>
<p><code>setRNG</code> set the current RNG with a seed, using a
suitable <code>.setRNG</code> method to set these settings.
</p>
<p><code>.setRNG</code> is an S4 generic that sets the current RNG
settings, from a variety of specifications. Its methods
define the workhorse functions that are called by
<code>setRNG</code>.
</p>


<h3>Usage</h3>

<pre>
  getRNG(object, ..., num.ok = FALSE, extract = TRUE,
    recursive = TRUE)

  hasRNG(object)

  .getRNG(object, ...)

  getRNG1(object, ...)

  nextRNG(object, ..., ndraw = 0L)

  setRNG(object, ..., verbose = FALSE, check = TRUE)

  .setRNG(object, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>an R object from which RNG settings can be
extracted, e.g. an integer vector containing a suitable
value for <code>.Random.seed</code> or embedded RNG data, e.g.,
in S3/S4 slot <code>rng</code> or <code>rng$noise</code>.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>extra arguments to allow extension and passed
to a suitable S4 method <code>.getRNG</code> or
<code>.setRNG</code>.</p>
</td></tr>
<tr valign="top"><td><code>num.ok</code></td>
<td>
<p>logical that indicates if single numeric
(not integer) RNG data should be considered as a valid
RNG seed (<code>TRUE</code>) or passed to
<code><a href="../../base/html/Random.html">set.seed</a></code> into a proper RNG seed
(<code>FALSE</code>) (See details and examples).</p>
</td></tr>
<tr valign="top"><td><code>extract</code></td>
<td>
<p>logical that indicates if embedded RNG
data should be looked for and extracted (<code>TRUE</code>) or
if the object itself should be considered as an RNG
specification.</p>
</td></tr>
<tr valign="top"><td><code>recursive</code></td>
<td>
<p>logical that indicates if embedded RNG
data should be extracted recursively (<code>TRUE</code>) or
only once (<code>FASE</code>).</p>
</td></tr>
<tr valign="top"><td><code>ndraw</code></td>
<td>
<p>number of draws to perform before returning
the RNG seed.</p>
</td></tr>
<tr valign="top"><td><code>check</code></td>
<td>
<p>logical that indicates if only valid RNG
kinds should be accepted, or if invalid values should
just throw a warning. Note that this argument is used
only on R &gt;= 3.0.2.</p>
</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>
<p>a logical that indicates if the new RNG
settings should be displayed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function handles single number RNG specifications in
the following way: </p>
 <dl>
<dt>integers</dt><dd><p>Return them
unchanged, considering them as encoded RNG kind
specification (see <code><a href="../../base/html/Random.html">RNG</a></code>). No validity check
is performed.</p>
</dd> <dt>real numbers</dt><dd><p>If <code>num.ok=TRUE</code>
return them unchanged. Otherwise, consider them as
(pre-)seeds and pass them to <code><a href="../../base/html/Random.html">set.seed</a></code> to
get a proper RNG seed. Hence calling <code>getRNG(1234)</code>
is equivalent to <code>set.seed(1234); getRNG()</code> (See
examples). </p>
</dd> </dl>

<p>Think of a sequence of separate computations, from which
only one result is used for the result (e.g. the one that
maximises a likelihood): <code>getRNG1</code> would return the
RNG settings to reproduce the complete sequence of
computations, while <code>getRNG</code> would return the RNG
settings necessary to reproduce only the computation
whose result has maximum likelihood.
</p>


<h3>Value</h3>

<p><code>getRNG</code>, <code>getRNG1</code>, <code>nextRNG</code> and
<code>setRNG</code> usually return an integer vector of length
&gt; 2L, like <code><a href="../../base/html/Random.html">.Random.seed</a></code>.
</p>
<p><code>getRNG</code> and <code>getRNG1</code> return <code>NULL</code> if no
RNG data was found.
</p>
<p><code>setRNG</code> invisibly returns the old RNG settings as
they were before changing them.
</p>


<h3>Methods</h3>


<dl>
<dt>.getRNG</dt><dd><p><code>signature(object = "ANY")</code>: Default
method that tries to extract RNG information from
<code>object</code>, by looking sequentially to a slot named
<code>'rng'</code>, a slot named <code>'rng.seed'</code> or an
attribute names <code>'rng'</code>.
</p>
<p>It returns <code>NULL</code> if no RNG data was found. </p>
</dd>
<dt>.getRNG</dt><dd><p><code>signature(object = "missing")</code>:
Returns the current RNG settings. </p>
</dd>
<dt>.getRNG</dt><dd><p><code>signature(object = "list")</code>: Method
for S3 objects, that aims at reproducing the behaviour of
the function <code>getRNG</code> of the package <code>getRNG</code>.
</p>
<p>It sequentially looks for RNG data in elements
<code>'rng'</code>, <code>noise$rng</code> if element <code>'noise'</code>
exists and is a <code>list</code>, or in attribute
<code>'rng'</code>. </p>
</dd>
<dt>.getRNG</dt><dd><p><code>signature(object = "numeric")</code>:
Method for numeric vectors, which returns the object
itself, coerced into an integer vector if necessary, as
it is assumed to already represent a value for
<code><a href="../../base/html/Random.html">.Random.seed</a></code>. </p>
</dd>
<dt>getRNG1</dt><dd><p><code>signature(object = "ANY")</code>: Default
method that is identical to <code>getRNG(object, ...)</code>. </p>
</dd>
<dt>.setRNG</dt><dd><p><code>signature(object = "character")</code>:
Sets the RNG to kind <code>object</code>, assuming is a valid
RNG kind: it is equivalent to <code>RNGkind(object, ...</code>.
All arguments in <code>...</code> are passed to
<code><a href="../../base/html/Random.html">RNGkind</a></code>. </p>
</dd>
<dt>.setRNG</dt><dd><p><code>signature(object = "numeric")</code>: Sets
the RNG settings using <code>object</code> directly the new
value for <code>.Random.seed</code> or to initialise it with
<code><a href="../../base/html/Random.html">set.seed</a></code>. </p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="../../base/html/Random.html">.Random.seed</a></code>, <code><a href="RNGstr.html">showRNG</a></code>
</p>


<h3>Examples</h3>

<pre>
# get current RNG settings
s &lt;- getRNG()
head(s)
showRNG(s)

# get RNG from a given single numeric seed
s1234 &lt;- getRNG(1234)
head(s1234)
showRNG(s1234)
# this is identical to the RNG seed as after set.seed()
set.seed(1234)
identical(s1234, .Random.seed)
# but if num.ok=TRUE the object is returned unchanged
getRNG(1234, num.ok=TRUE)

# single integer RNG data = encoded kind
head(getRNG(1L))

# embedded RNG data
s &lt;- getRNG(list(1L, rng=1234))
identical(s, s1234)
# test for embedded RNG data
hasRNG(1)
hasRNG( structure(1, rng=1:3) )
hasRNG( list(1, 2, 3) )
hasRNG( list(1, 2, 3, rng=1:3) )
hasRNG( list(1, 2, 3, noise=list(1:3, rng=1)) )
head(nextRNG())
head(nextRNG(1234))
head(nextRNG(1234, ndraw=10))
obj &lt;- list(x=1000, rng=123)
setRNG(obj)
rng &lt;- getRNG()
runif(10)
set.seed(123)
rng.equal(rng)
# set RNG kind
old &lt;- setRNG('Marsaglia')
# restore
setRNG(old)
# directly set .Random.seed
rng &lt;- getRNG()
r &lt;- runif(10)
setRNG(rng)
rng.equal(rng)

# initialise from a single number (&lt;=&gt; set.seed)
setRNG(123)
rng &lt;- getRNG()
runif(10)
set.seed(123)
rng.equal(rng)
</pre>

<hr /><div style="text-align: center;">[Package <em>rngtools</em> version 1.2.4 <a href="00Index.html">Index</a>]</div>
</body></html>
