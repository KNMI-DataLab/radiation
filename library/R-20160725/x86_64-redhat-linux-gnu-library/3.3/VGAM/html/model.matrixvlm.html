<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Construct the Design Matrix of a VLM Object</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for model.matrixvlm {VGAM}"><tr><td>model.matrixvlm {VGAM}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Construct the Design Matrix of a VLM Object</h2>

<h3>Description</h3>

<p>Creates a design matrix. Two types can be
returned: a large one (class <code>"vlm"</code> or one that inherits
from this such as <code>"vglm"</code>) or a small one
(such as returned if it were of class <code>"lm"</code>).
</p>


<h3>Usage</h3>

<pre>
model.matrixvlm(object, type = c("vlm", "lm", "lm2", "bothlmlm2"),
                linpred.index = NULL, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>an object of a class that inherits from the
<em>vector linear model</em> (VLM).
</p>
</td></tr>
<tr valign="top"><td><code>type</code></td>
<td>
<p>Type of design matrix returned. The first is the default. 
The value <code>"vlm"</code> is the VLM model matrix corresponding
to the <code>formula</code> argument.
The value <code>"lm"</code> is the LM model matrix corresponding
to the <code>formula</code> argument.
The value <code>"lm2"</code> is the second (LM) model matrix corresponding
to the <code>form2</code> argument.
The value <code>"bothlmlm2"</code> means both LM and VLM model matrices.
</p>
</td></tr>
<tr valign="top"><td><code>linpred.index</code></td>
<td>

<p>Single integer.
The index for a linear/additive predictor,
it must have a value from the set <code>1:M</code>,
and <code>type = "lm"</code>  must be assigned.
Then it returns a subset of the VLM matrix corresponding to
the <code>linpred.index</code>th linear/additive predictor;
this is a LM-type matrix.
</p>
</td></tr>    
<tr valign="top"><td><code>...</code></td>
<td>
<p>further arguments passed to or from other methods.
These include <code>data</code> (which
is a data frame created with <code><a href="model.framevlm.html">model.framevlm</a></code>),
<code>contrasts.arg</code>, and <code>xlev</code>.
See <code><a href="../../stats/html/model.matrix.html">model.matrix</a></code> for more information.
</p>
</td></tr>    
</table>


<h3>Details</h3>

<p>This function creates a design matrix from <code>object</code>.
This can be a small LM object or a big VLM object (default).
The latter is constructed from the former and the constraint
matrices.
</p>
<p>This code implements <em>smart prediction</em>
(see <code><a href="smartpred.html">smartpred</a></code>).
</p>


<h3>Value</h3>

<p>The design matrix for a regression model with the specified formula
and data. 
If <code>type = "bothlmlm2"</code> then a list is returned with components
<code>"X"</code> and <code>"Xm2"</code>.
</p>


<h3>References</h3>

<p>Yee, T. W. and Hastie, T. J. (2003)
Reduced-rank vector generalized linear models.
<em>Statistical Modelling</em>,
<b>3</b>, 15&ndash;41.
</p>
<p>Chambers, J. M. (1992)
<em>Data for models.</em>
Chapter 3 of <em>Statistical Models in S</em>
eds J. M. Chambers and T. J. Hastie, Wadsworth &amp; Brooks/Cole.
</p>


<h3>See Also</h3>

<p><code><a href="../../stats/html/model.matrix.html">model.matrix</a></code>,
<code><a href="model.framevlm.html">model.framevlm</a></code>,
<code><a href="predictvglm.html">predictvglm</a></code>,
<code><a href="smartpred.html">smartpred</a></code>.
</p>


<h3>Examples</h3>

<pre>
# Illustrates smart prediction
pneumo &lt;- transform(pneumo, let = log(exposure.time))
fit &lt;- vglm(cbind(normal, mild, severe) ~ poly(c(scale(let)), 2),
            multinomial, data = pneumo, trace = TRUE, x = FALSE)
class(fit)
fit@x # Not saved on the object
model.matrix(fit)
model.matrix(fit, linpred.index = 1, type = "lm")
model.matrix(fit, linpred.index = 2, type = "lm")

(Check1 &lt;- head(model.matrix(fit, type = "lm")))
(Check2 &lt;- model.matrix(fit, data = head(pneumo), type = "lm"))
all.equal(c(Check1), c(Check2))

q0 &lt;- head(predict(fit))
q1 &lt;- head(predict(fit, newdata = pneumo))
q2 &lt;- predict(fit, newdata = head(pneumo))
all.equal(q0, q1)  # Should be TRUE
all.equal(q1, q2)  # Should be TRUE
</pre>

<hr /><div style="text-align: center;">[Package <em>VGAM</em> version 1.0-2 <a href="00Index.html">Index</a>]</div>
</body></html>
