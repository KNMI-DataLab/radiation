<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Custom GObject classes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for classes {RGtk2}"><tr><td>classes {RGtk2}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Custom GObject classes</h2>

<h3>Description</h3>

<p>Highly experimental support for constructing new <code>GObject</code>
classes entirely from with R.</p>


<h3>Usage</h3>

<pre>
  gClass(name, parent = "GObject", ..., abstract = FALSE)
  parentHandler(method, obj = NULL, ...)
  assignProp(obj, pspec, value)
  getProp(obj, pspec)
  registerVirtuals(virtuals)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>name</code></td>
<td>
<p>The name of the new class</p>
</td></tr>
<tr valign="top"><td><code>parent</code></td>
<td>
<p>The name of the parent class</p>
</td></tr>
<tr valign="top"><td><code>abstract</code></td>
<td>
<p>If <code>TRUE</code>, the class should not be instantiable.</p>
</td></tr>
<tr valign="top"><td><code>method</code></td>
<td>
<p>The name of the method to invoke in the parent</p>
</td></tr>
<tr valign="top"><td><code>obj</code></td>
<td>
<p>A <code><a href="GObject.html">GObject</a></code></p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Additional arguments. For <code>parentHandler()</code>, arguments
to pass to the parent method. For <code>gClass()</code>, arguments
specifying the class definition (see Details).</p>
</td></tr>
<tr valign="top"><td><code>pspec</code></td>
<td>
<p>A <code><a href="GParamSpec.html">GParamSpec</a></code> describing the property</p>
</td></tr>
<tr valign="top"><td><code>value</code></td>
<td>
<p>The value to set on the property</p>
</td></tr>
<tr valign="top"><td><code>virtuals</code></td>
<td>
<p>An environment containing lists where each list contains
the names of the virtual methods for the class matching the name of the list</p>
</td></tr></table>
<p>.
</p>


<h3>Details</h3>

<p>The bulk of the class definition (everything except the name and the parent) 
is passed through additional arguments to the <code>gClass</code>
function. This information includes:
</p>

<dl>
<dt>Methods</dt><dd><p>R functions that override virtuals methods in a <code>GObject</code> class.
Functions overriding methods in the same class are grouped together in a list and 
are named according to the virtual they override. Each list is
passed as a separate parameter to the
<code>class_def</code> list and bears the name of the corresponding class.</p>
</dd>
<dt>Signals</dt><dd><p>Signals that are emitted by the class, in addition to those
of the superclasses. Each signal definition is a list containing the 
following elements: signal name, vector of type names of signal arguments,
type name of signal return value, and a vector of values from the 
<code><a href="GSignal.html">GSignalFlags</a></code> enumeration. The list of signal definitions
is passed as a parameter named <code>.signals</code> to the <code>gClass</code>.</p>
</dd>
<dt>Properties</dt><dd><p>Properties defined by the class. This is a list of lists,
each corresponding to a <code>GParamSpec</code>, as created by <code><a href="GParamSpec.html">gParamSpec</a></code>.
The list is passed under the name <code>.props</code> to <code>gClass</code>.  The property values
are stored in a private environment. To override that behavior or to be notified
(first) upon property changes, simply override the <code>set_property</code> and 
<code>get_property</code> virtuals in the <code>GObject</code> class. To override
the implementation of properties defined by an ancestor class, specify their
names in a separate vector passed as the <code>.prop_overrides</code>
parameter. If you override the setting or getting of properties,
you can use <code>assignProp</code> or <code>getProp</code> to conveniently
directly assign or get the value of a property to or from the
low-level data structure, respectively. These functions differ from
the normal property accessor mechanism in that they bypass the
property system, thus avoiding recursion. They should only be used
when overriding property handling.</p>
</dd>
<dt>Initializer</dt><dd><p>Upon instance creation, the function named
<code>.initialize</code> (in the parameters passed to <code>gClass</code>)
will be called with the instance as the only argument.</p>
</dd>
<dt>New members</dt><dd><p>It is possible to define new public, protected, and
private fields and methods inside an R class, by passing them to
<code>gClass</code> within
lists named <code>.public</code>, <code>.protected</code>, or <code>.private</code>,
respectively. The encapsulation works much the same as Java. Any
protected and public functions may be overriden in a class derived
from the defining class. All public fields are immutable. All
function bindings are locked except for private ones. This means
private functions can be replaced.</p>
</dd>
</dl>

<p>The above may seem complicated, and it is. Please see the alphaSliderClass 
for an example. Also note that the <code>local</code> function
is convenient for defining static namespaces on the fly. For calling
parent virtuals, use <code>parentHandler</code>.
</p>
<p><code>assignProp</code> and <code>getProp</code> are low-level functions; they should
not be used in place of the conventional <code><a href="GObject.html">GObject</a></code> property
mechanism, except in the case mentioned above.
</p>
<p><code>registerVirtuals</code> and <code>unregisterVirtuals</code> are meant for use by 
packages that bind C GObject classes to R using the RGtk2 system. An example
of such a package is rggobi.
</p>


<h3>Value</h3>

<p>For <code>gClass</code>, the <code><a href="GType.html">GType</a></code> of the new class.
For <code>getProp</code>, the value of the property.
</p>


<h3>Note</h3>

<p>This functionality is not for casual users. If you don't know what
you're doing you will break things. Otherwise, have fun.
</p>


<h3>Author(s)</h3>

<p>Michael Lawrence</p>

<hr /><div style="text-align: center;">[Package <em>RGtk2</em> version 2.20.31 <a href="00Index.html">Index</a>]</div>
</body></html>
