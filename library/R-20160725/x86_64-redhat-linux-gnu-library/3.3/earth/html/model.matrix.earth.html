<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Get the earth basis matrix</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for model.matrix.earth {earth}"><tr><td>model.matrix.earth {earth}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Get the earth basis matrix</h2>

<h3>Description</h3>

<p>Get the basis matrix of an <code><a href="earth.html">earth</a></code> object.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'earth'
model.matrix(object = stop("no 'object' argument"),
    x = NULL, subset = NULL, which.terms = NULL,
    ...,
    env = parent.frame(),
    trace = 0,
    Callers.name = "model.matrix.earth")
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>

<p>An <code><a href="earth.html">earth</a></code> object.
This is the only required argument.
</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>

<p>An input matrix with the same number of columns as the <code>x</code> matrix
used to construct the original <code><a href="earth.html">earth</a></code> object.
Default is NULL, meaning use the original <code>x</code> matrix after
taking the original <code>subset</code>, if any.
</p>
</td></tr>
<tr valign="top"><td><code>subset</code></td>
<td>

<p>Which rows to use in <code>x</code>.
Default is NULL, meaning use all of <code>x</code>.
</p>
</td></tr>
<tr valign="top"><td><code>which.terms</code></td>
<td>

<p>Which terms to use.
Default is NULL, meaning use <code>object$selected.terms</code>.
</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>

<p>Unused, but provided for generic/method consistency.
</p>
</td></tr>
<tr valign="top"><td><code>env</code></td>
<td>

<p>For internal use.
</p>
</td></tr>
<tr valign="top"><td><code>trace</code></td>
<td>

<p>Default 0. Set to non-zero to see which data <code>model.matrix.earth</code> is using.
</p>
</td></tr>
<tr valign="top"><td><code>Callers.name</code></td>
<td>

<p>For internal use (used by earth in trace messages).
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A basis matrix <code>bx</code> of the same form returned by <code><a href="earth.html">earth</a></code>.<br />
</p>
<p>If <code>x</code>, <code>subset</code>, and <code>which.terms</code> are all NULL, this
function returns the object's <code>bx</code>.  In this case, it is perhaps easier
to simply use <code>object$bx</code>.<br />
</p>
<p>The format of <code>bx</code> is described in <code><a href="earth.html">earth</a></code>.
The matrix <code>bx</code> can be used
as the input matrix to <code><a href="../../stats/html/lm.html">lm</a></code> or <code><a href="../../stats/html/glm.html">glm</a></code>,
as shown below in the example.
In fact, that is what earth does internally after the pruning pass &mdash;
it calls <code><a href="../../stats/html/lmfit.html">lm.fit</a></code>,
and additionally <code><a href="../../stats/html/glm.html">glm</a></code> if earth's <code>glm</code> argument is used.
</p>


<h3>See Also</h3>

<p><code><a href="earth.html">earth</a></code>
</p>


<h3>Examples</h3>

<pre>
data(trees)
earth.mod &lt;- earth(Volume ~ ., data = trees)
summary(earth.mod, decomp = "none") # "none" to print terms in same seq as lm.mod below

bx &lt;- model.matrix(earth.mod)         # equivalent to bx &lt;- earth.mod$bx
lm.mod &lt;- lm(trees$Volume ~ bx[,-1])  # -1 to drop intercept
summary(lm.mod)                       # yields same coeffs as above summary
                                      # displayed t values are not meaningful
</pre>

<hr /><div style="text-align: center;">[Package <em>earth</em> version 4.4.6 <a href="00Index.html">Index</a>]</div>
</body></html>
