<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Set or query animation options</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for ani.options {animation}"><tr><td>ani.options {animation}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Set or query animation options</h2>

<h3>Description</h3>

<p>There are various parameters that control the behaviour of the animation,
such as time interval, maximum number of animation frames, height and width,
etc.
</p>


<h3>Usage</h3>

<pre>
ani.options(...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>...</code></td>
<td>
<p>arguments in <code>tag = value</code> form, or a list of tagged values.
The tags usually come from the animation parameters described below, but
they are not restricted to these tags (any tag can be used; this is similar
to <code><a href="../../base/html/options.html">options</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ani.options()</code> returns a list containing the options: when
parameters are set, their former values are returned in an invisible named
list.  Such a list can be passed as an argument to
<code><a href="ani.options.html">ani.options</a></code> to restore the parameter values.
</p>
<p><code>ani.options('tag')</code> returns the value of the option <code>'tag'</code>.
</p>
<p><code>ani.options(c('tag1', 'tag2'))</code> or <code>ani.options('tag1', 'tag2')</code>
returns a list containing the corresponding options.
</p>


<h3>Animation options</h3>

<p>The supported animation parameters: </p>

<dl>
<dt>interval</dt><dd><p> a positive number to set the time interval of the
animation (unit in seconds); default to be 1. </p>
</dd>
<dt>nmax</dt><dd><p> maximum number of steps in a loop (e.g. iterations) to create
animation frames. Note: the actual number of frames can be less than this
number, depending on specific animations. Default to be 50.</p>
</dd>
<dt>ani.width, ani.height</dt><dd><p> width and height of image frames (unit in
px); see graphics devices like <code><a href="../../grDevices/html/png.html">png</a></code>, <code><a href="../../grDevices/html/png.html">jpeg</a></code>, ...;
default to be 480. NB: for different graphics devices, the units of these
values might be different, e.g. PDF devices usually use inches, whereas
bitmap devices often use pixels.</p>
</dd>
<dt>imgdir</dt><dd><p>character: the name of the directory (a relative path) for
images when creating HTML animation pages; default to be <code>'images'</code>.</p>
</dd>
<dt>htmlfile</dt><dd><p>character: name of the target HTML main file (without path
name; basename only; default to be <code>'index.html'</code>)</p>
</dd>
<dt>ani.dev</dt><dd><p>a function or a function name: the graphics device; e.g.
(<code><a href="../../grDevices/html/png.html">png</a></code>, <code><a href="../../grDevices/html/pdf.html">pdf</a></code>, ...); default to be <code>'png'</code></p>
</dd>
<dt>ani.type</dt><dd><p>character: image format for animation frames, e.g.
<code>png</code>, <code>jpeg</code>, ...; default to be <code>'png'</code>; this will be used
as the file extension of images, so don't forget to change this option as
well when you changed the option <code>ani.dev</code></p>
</dd>
<dt>title, description</dt><dd><p>character: the title and description of the
animation in the HTML page created by <code><a href="saveHTML.html">saveHTML</a></code></p>
</dd>
<dt>verbose</dt><dd><p> logical or character: if <code>TRUE</code>, write a footer part
in the HTML page containing detailed technical information; if given a
character string, it will be used as the footer message; in other cases,
the footer of the page will be blank.</p>
</dd>
<dt>loop</dt><dd><p>whether to iterate or not (default <code>TRUE</code> to iterate for
infinite times)</p>
</dd>
<dt>autobrowse</dt><dd><p>logical: whether auto-browse the animation page
immediately after it is created? (default to be <code>interactive()</code>)</p>
</dd>
<dt>autoplay</dt><dd><p>logical: whether to autoplay the animation when the HTML
page is loaded (default to be <code>TRUE</code>); only applicable to
<code><a href="saveHTML.html">saveHTML</a></code></p>
</dd>
<dt>use.dev</dt><dd><p> whether to use the graphics device specified in
<code>ani.options('ani.dev')</code> (default to be <code>TRUE</code>); if <code>FALSE</code>,
we need to generate image files by our own approaches in the expression
<code>expr</code> (see functions <code><a href="saveHTML.html">saveHTML</a></code>, <code><a href="saveGIF.html">saveGIF</a></code>,
<code><a href="saveLatex.html">saveLatex</a></code> and <code><a href="saveSWF.html">saveSWF</a></code>); this can be useful when
the output cannot be captured by standard R graphics devices &ndash; a typical
example is the <span class="pkg">rgl</span> graphics (we can use <code>rgl.snapshot</code> to
capture <span class="pkg">rgl</span> graphics to png files, or <code>rgl.postscript</code> to save
plots as postscript/pdf; see <code>demo('rgl_animation')</code> or
<code>demo('use_Cairo')</code> for examples or the last example below). Note,
however, we do not really have to create the images using R graphics
devices &ndash; see <code>demo('flowers')</code> on how to download images from the
Internet and create an HTML animation page!</p>
</dd>
</dl>



<h3>Hidden options</h3>

<p>There are a couple of &ldquo;hidden&rdquo; options which are
designed to facilitate the usage of some functions but are not initialized
like the above options when the package is loaded, including:
</p>

<dl>
<dt>convert</dt><dd><p>this option will be checked first when calling
<code><a href="convert.html">im.convert</a></code> (or <code><a href="saveGIF.html">saveGIF</a></code>) to see if it contains
the path to &lsquo;<span class="file">convert.exe</span>&rsquo;; we can specify it beforehand to save the
efforts in searching for &lsquo;<span class="file">convert.exe</span>&rsquo; in ImageMagick under Windows.
For example, <code>ani.options(convert = 'c:/program
  files/imagemagick/convert.exe')</code>; note this option also works for Mac and
Linux (see <code>help(im.convert)</code>)</p>
</dd>
<dt>swftools</dt><dd><p>this can help <code><a href="saveSWF.html">saveSWF</a></code> save the efforts of
searching for the software package &ldquo;SWF Tools&rdquo; under Windows; e.g. we can
specify <code>ani.options(swftools = 'c:/program files/swftools')</code> in
advance</p>
</dd>
<dt>img.fmt</dt><dd><p>the value of this option can be used to determine the image
filename format when we want to use custom graphics devices to record
images, e.g. in <code><a href="saveLatex.html">saveLatex</a></code>, if <code>ani.options('use.dev') ==
  FALSE</code>, then <code>ani.options('img.fmt')</code> will be a string like
<code>'path/to/output/img.name%d.png'</code>, so we can use it to generate file
names in the argument <code>expr</code>; see <code>demo('rgl_animation')</code> for
example or the last example below</p>
</dd>
<dt>qpdf</dt><dd><p>the path of the program <code>qpdf</code>, e.g.
<code>ani.options(qpdf = 'C:/Software/qpdf/bin/qpdf.exe')</code>; <code>qpdf</code>
is mainly used to compress PDF files in this package, and it is a smaller
tool than <code>pdftk</code>. It is recommended over <code>pdftk</code>
especially under Linux, because tests show that <code>pdftk</code> does not
work well under Linux in compressing PDF files, while <code>qpdf</code> is
much better.</p>
</dd>
<dt>pdftk</dt><dd><p>the path of the program <code>Pdftk</code>, e.g.
<code>ani.options(pdftk = 'C:/Software/pdftk.exe')</code> or
<code>ani.options(pdftk = '/home/john/bin/pdftk')</code>; <code>pdftk</code> will be
used to compress the PDF graphics output in the function
<code><a href="pdftk.html">pdftk</a></code>; compression will not be tried if this options is
<code>NULL</code>. This option will only affect <code><a href="saveGIF.html">saveGIF</a></code>,
<code><a href="saveLatex.html">saveLatex</a></code> and <code><a href="saveSWF.html">saveSWF</a></code> when
<code>ani.options('ani.type')</code> is <code>'pdf'</code>.</p>
</dd>
<dt>ffmpeg</dt><dd><p>the path of the progam <code>ffmpeg</code>, e.g.
<code>ani.options(ffmpeg = 'C:/Software/ffmpeg/bin/ffmpeg.exe')</code>; FFmpeg is
used to convert a sequence of images to a video. See
<code><a href="saveVideo.html">saveVideo</a></code>.</p>
</dd>
</dl>



<h3>Note</h3>

<p>Please note that <code>nmax</code> is not always equal to the number of
animation frames. Sometimes there is more than one frame recorded in a
single step of a loop, for instance, there are 2 frames generated in each
step of <code><a href="kmeans.ani.html">kmeans.ani</a></code>, and 4 frames in <code><a href="knn.ani.html">knn.ani</a></code>,
etc; whereas for <code><a href="newton.method.html">newton.method</a></code>, the number of animation
frames is not definite, because there are other criteria to break the loop.
</p>
<p>This function can be used for almost all the animation functions such as
<code><a href="brownian.motion.html">brownian.motion</a></code>, <code><a href="boot.iid.html">boot.iid</a></code>,
<code><a href="buffon.needle.html">buffon.needle</a></code>, <code><a href="cv.ani.html">cv.ani</a></code>, <code><a href="flip.coin.html">flip.coin</a></code>,
<code><a href="kmeans.ani.html">kmeans.ani</a></code>, <code><a href="knn.ani.html">knn.ani</a></code>, etc. Most of the options
here will affect the behaviour of animations of the formats HTML, GIF, SWF
and PDF; on-screen animations are only affected by <code>interval</code> and
<code>nmax</code>.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>See Also</h3>

<p><code><a href="../../base/html/options.html">options</a></code>, <code><a href="../../grDevices/html/dev.interactive.html">dev.interactive</a></code>,
<code><a href="saveHTML.html">saveHTML</a></code>, <code><a href="saveGIF.html">saveGIF</a></code>, <code><a href="saveLatex.html">saveLatex</a></code>,
<code><a href="saveSWF.html">saveSWF</a></code>, <code><a href="pdftk.html">pdftk</a></code>
</p>
<p><a href="http://qpdf.sourceforge.net/">http://qpdf.sourceforge.net/</a>
</p>
<p><a href="http://www.pdflabs.com/docs/pdftk-man-page/">http://www.pdflabs.com/docs/pdftk-man-page/</a>
</p>


<h3>Examples</h3>

<pre>
## see the first example in help(animation) on how to set and
## restore animation options

## use the PDF device: remember to set 'ani.type' accordingly
oopt = ani.options(ani.dev = "pdf", ani.type = "pdf", ani.height = 5, 
    ani.width = 7)

## use the Cairo PDF device if (require('Cairo')) {
## ani.options(ani.dev = CairoPDF, ani.type = 'pdf', ani.height =
## 6, ani.width = 6) }

## don't loop for GIF/HTML animations
ani.options(loop = FALSE)

## don't try to open the output automatically
ani.options(autobrowse = FALSE)

## it's a good habit to restore the options in the end so that
## other code will not be affected
ani.options(oopt)

## how to make use of the hidden option 'img.fmt'
saveHTML(expr = {
    png(ani.options("img.fmt"))
    for (i in 1:5) plot(runif(10))
    dev.off()
}, img.name = "custom_plot", use.dev = FALSE, ani.type = "png", 
    description = "Note how we use our own graphics device in 'expr'.", 
    htmlfile = "custom_device.html")
</pre>

<hr /><div style="text-align: center;">[Package <em>animation</em> version 2.4 <a href="00Index.html">Index</a>]</div>
</body></html>
