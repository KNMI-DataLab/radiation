<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Insert animations into an HTML page</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for saveHTML {animation}"><tr><td>saveHTML {animation}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Insert animations into an HTML page</h2>

<h3>Description</h3>

<p>This function first records all the plots in the R expression as bitmap
images, then inserts them into an HTML page and finally creates the animation
using the SciAnimator library.
</p>


<h3>Usage</h3>

<pre>
saveHTML(expr, img.name = "Rplot", global.opts = "", single.opts = "", 
    navigator = ani.options("nmax") &lt;= 100 &amp;&amp; ani.options("interval") &gt;= 
        0.05, htmlfile = "index.html", ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>expr</code></td>
<td>
<p>an R expression to be evaluated to create a sequence of images</p>
</td></tr>
<tr valign="top"><td><code>img.name</code></td>
<td>
<p>the filename of the images (the real output will be like
&lsquo;<span class="file">img.name1.png</span>&rsquo;, &lsquo;<span class="file">img.name2.png</span>&rsquo;, ...); this name has to be
different for different animations, since it will be used as the
identifiers for each animation; make it as unique as possible; meanwhile,
the following characters in <code>img.name</code> will be replaced by <code>_</code> to
make it a legal jQuery string:
</p>
<p><code style="white-space: pre;">!"#$%&amp;'()*+,./:;?@[\]^`{|}~</code></p>
</td></tr>
<tr valign="top"><td><code>global.opts</code></td>
<td>
<p>a string: the global options of the animation; e.g. we can
specify the default theme to be blue using
<code style="white-space: pre;">$.fn.scianimator.defaults.theme = 'blue';</code> note these options must be
legal JavaScript expressions (ended by <code>';'</code>)</p>
</td></tr>
<tr valign="top"><td><code>single.opts</code></td>
<td>
<p>the options for each single animation (if there are
multiple ones in one HTML page), e.g. to use the dark theme and text labels
for buttons:
</p>
<p><code style="white-space: pre;">'utf8': false, 'theme': 'dark'</code>
</p>
<p>or to remove the navigator panel (the navigator can affect the smoothness
of the animation when the playing speed is extremely fast (e.g.
<code>interval</code> less than 0.05 seconds)):
</p>
<p><code style="white-space: pre;">'controls': ['first', 'previous', 'play', 'next', 'last', 'loop',
  'speed']</code>
</p>
<p>see the reference for a complete list of available options</p>
</td></tr>
<tr valign="top"><td><code>navigator</code></td>
<td>
<p>whether to show the navigator (like a progress bar); by
default, the navigator is not shown for performance reasons when the number
of images is greater than 100 or the time interval is smaller than 0.05</p>
</td></tr>
<tr valign="top"><td><code>htmlfile</code></td>
<td>
<p>the filename of the HTML file</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>other arguments to be passed to <code><a href="ani.options.html">ani.options</a></code> to
animation options such as the time interval between image frames</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It mainly uses the SciAnimator library, which is based on jQuery. It has a
neat interface (both technically and visually) and is much easier to use or
extend. Moreover, this function allows multiple animations in a single HTML
page &ndash; just use the same HTML filename.
</p>
<p>Optionally the source code and some session information can be added below
the animations for the sake of reproducibility (specified by the option
<code>ani.options('verbose')</code> &ndash; if <code>TRUE</code>, the description, loaded
packages, the code to produce the animation, as well as a part of
<code><a href="../../utils/html/sessionInfo.html">sessionInfo</a>()</code> will be written in the bottom of the animation;
the R code will be highlighted using the SyntaxHighlighter library for better
reading experience).
</p>


<h3>Value</h3>

<p>The path of the HTML output.
</p>


<h3>Note</h3>

<p>Microsoft IE might restrict the HTML page from running JavaScript and
try to &ldquo;protect your security&rdquo; when you view the animation page, but this
is not really a security problem.
</p>
<p>When you want to publish the HTML page on the web, you have  to upload the
associated &lsquo;<span class="file">css</span>&rsquo; and &lsquo;<span class="file">js</span>&rsquo; folders with the HTML file as well as
the images.
</p>
<p>For <code><a href="saveHTML.html">saveHTML</a></code>, <code>ani.options('description')</code> can be a
character vector, in which case this vector will be pasted into a scalar;
use <code>'\n\n'</code> in the string to separate paragraphs (see the first
example below).
</p>
<p>For the users who do not have R at hand, there is a demo in
<code>system.file('misc', 'Rweb', 'demo.html', package = 'animation')</code> to
show how to create animations online without R being installed locally. It
depends, however, on whether the Rweb service can be provided for public
use in a long period (currently we are using the Rweb at Tama University).
See the last example below.
</p>


<h3>Author(s)</h3>

<p>Yihui Xie
</p>


<h3>References</h3>

<p><a href="https://github.com/brentertz/scianimator">https://github.com/brentertz/scianimator</a>
</p>


<h3>See Also</h3>

<p>Other utilities: <code><a href="convert.html">gm.convert</a></code>,
<code><a href="convert.html">im.convert</a></code>; <code><a href="saveGIF.html">saveGIF</a></code>,
<code><a href="saveGIF.html">saveMovie</a></code>; <code><a href="saveLatex.html">saveLatex</a></code>;
<code><a href="saveSWF.html">saveSWF</a></code>; <code><a href="saveVideo.html">saveVideo</a></code>
</p>


<h3>Examples</h3>

<pre>
## A quick and dirty demo
des = c("This is a silly example.\n\n", "You can describe it in more detail.", 
    "For example, bla bla...")
saveHTML({
    par(mar = c(4, 4, 0.5, 0.5))
    for (i in 1:20) {
        plot(runif(20), ylim = c(0, 1))
        ani.pause()
    }
}, img.name = "unif_plot", imgdir = "unif_dir", htmlfile = "random.html", 
    autobrowse = FALSE, title = "Demo of 20 uniform random numbers", 
    description = des)



## we can merge another animation into the former page as long as
## 'htmlfile' is the same; this time I don't want the animation
## to autoplay, and will use text labels for the buttons (instead
## of UTF-8 symbols)
des = c("When you write a long long long long description, R will try to wrap the", 
    "words automatically.", "Oh, really?!")
saveHTML({
    par(mar = c(4, 4, 0.5, 0.5))
    ani.options(interval = 0.5)
    for (i in 1:10) {
        plot(rnorm(50), ylim = c(-3, 3))
        ani.pause()
    }
}, img.name = "norm_plot", single.opts = "utf8: false", autoplay = FALSE, 
    interval = 0.5, imgdir = "norm_dir", htmlfile = "random.html", 
    ani.height = 400, ani.width = 600, title = "Demo of 50 Normal random numbers", 
    description = des)



## use the function brownian.motion() in this package; this page
## is created in 'index.html' under the current working directory
des = c("Random walk of 10 points on the 2D plane:", "for each point (x, y),", 
    "x = x + rnorm(1) and y = y + rnorm(1).")
saveHTML({
    par(mar = c(3, 3, 1, 0.5), mgp = c(2, 0.5, 0), tcl = -0.3, cex.axis = 0.8, 
        cex.lab = 0.8, cex.main = 1)
    ani.options(interval = 0.05, nmax = ifelse(interactive(), 150, 
        2))
    brownian.motion(pch = 21, cex = 5, col = "red", bg = "yellow")
}, img.name = "brownian_motion_a", htmlfile = "index.html", description = des)



## remove the 'navigator' (progress bar)
saveHTML({
    par(mar = c(3, 3, 1, 0.5), mgp = c(2, 0.5, 0), tcl = -0.3, cex.axis = 0.8, 
        cex.lab = 0.8, cex.main = 1)
    ani.options(interval = 0.05, nmax = ifelse(interactive(), 150, 
        2))
    brownian.motion(pch = 21, cex = 5, col = "red", bg = "yellow")
}, img.name = "brownian_motion_b", htmlfile = "index.html", navigator = FALSE, 
    description = c("Random walk of 10 points on the 2D plane", 
        "(without the navigation panel)"))


## use Rweb to create animations
if (interactive()) browseURL(system.file("misc", "Rweb", "demo.html", 
    package = "animation"))
</pre>

<hr /><div style="text-align: center;">[Package <em>animation</em> version 2.4 <a href="00Index.html">Index</a>]</div>
</body></html>
