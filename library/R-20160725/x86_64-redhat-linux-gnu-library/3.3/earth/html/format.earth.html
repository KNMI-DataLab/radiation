<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Format earth objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for format.earth {earth}"><tr><td>format.earth {earth}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Format earth objects</h2>

<h3>Description</h3>

<p>Return a string representing an <code><a href="earth.html">earth</a></code> expression.
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'earth'
format(x = stop("no 'x' argument"),
       style = "h", decomp = "anova", digits = getOption("digits"),
       use.names = TRUE, colon.char = ":", ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>

<p>An <code><a href="earth.html">earth</a></code> object.
This is the only required argument.
</p>
</td></tr>
<tr valign="top"><td><code>style</code></td>
<td>

<p>Formatting style. One of<br />
<code>"h"</code> (default) more compact<br />
<code>"pmax"</code> for those who prefer it and for compatibility with old versions of earth<br />
<code>"max"</code> is the same as <code>"pmax"</code> but prints <code>max</code> rather than <code>pmax</code><br />
<code>"C"</code> C style expression with zero based indexing<br />
<code>"bf"</code> basis function format
</p>
</td></tr>
<tr valign="top"><td><code>decomp</code></td>
<td>
<p>One of<br />
<code>"anova"</code>  (default) order the terms using the &quot;anova decomposition&quot;,
i.e., in increasing order of interaction<br />
<code>"none"</code>   order the terms as created during the earth forward pass.<br />
</p>
</td></tr>
<tr valign="top"><td><code>digits</code></td>
<td>

<p>Number of significant digits.
The default is <code>getOption(digits)</code>.
</p>
</td></tr>
<tr valign="top"><td><code>use.names</code></td>
<td>
<p>One of<br />
<code>TRUE</code> (default), use variable names if available.<br />
<code>FALSE</code> use names of the form <code>x[,1]</code>.
</p>
</td></tr>
<tr valign="top"><td><code>colon.char</code></td>
<td>

<p>Change colons in the returned string to colon.char.
Default is &quot;:&quot; (no change).
Specifying <code>colon.char="*"</code> can be useful in some contexts to change
names of the form <code>x1:x2</code> to <code>x1*x2</code>.
</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>

<p>Unused, but provided for generic/method consistency.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character representation of the <code>earth</code> model.
</p>
<p>If there are multiple responses, <code>format.earth</code> will return multiple strings.
</p>
<p>If there are embedded GLM model(s), the strings for the GLM model(s)
come after the strings for the standard <code>earth</code> model(s).
</p>


<h3>Note</h3>

<p>The FAQ section in the package vignette gives precise details of the
<code>"anova"</code> ordering.
</p>
<p>Using <code>format.earth</code>, perhaps after hand editing the returned string,
you can create an alternative to <code>predict.earth</code>.
For example:
</p>
<pre>as.func &lt;- function(object, digits = 8, use.names = FALSE, ...)
  eval(parse(text=paste(
    "function(x){\n",
    "if(is.vector(x))\n",
    "  x &lt;- matrix(x, nrow = 1, ncol = length(x))\n",
    "with(as.data.frame(x),\n",
    format(object, digits = digits, use.names = use.names, style = "pmax", ...),
    ")\n",
    "}\n", sep = "")))

earth.mod &lt;- earth(Volume ~ ., data = trees)
my.func &lt;- as.func(earth.mod, use.names = FALSE)
my.func(c(10,80))             # returns 16.84
predict(earth.mod, c(10,80))  # returns 16.84
</pre>
<p>Note that with <code>pmax</code> the R expression generated by
<code>format.earth</code> can handle multiple cases.
Thus the expression is consistent with the way <code>predict</code>
functions usually work in R &mdash; we can give <code>predict</code> multiple
cases (i.e., multiple rows in the input matrix) and it will return a
vector of predicted values.
</p>
<pre> 
</pre>
<p>The  earth package also provides a function <code>format.lm</code>.
It has arguments as follows<br />
<code>format.lm(x, digits=getOption("digits"), use.names=TRUE, colon.char=":")</code><br />
(Strictly speaking, <code>format.lm</code> doesn't belong in the earth package.) Example:
</p>
<pre>
lm.mod &lt;- lm(Volume ~ Height*Girth, data = trees)
cat(format(lm.mod, colon.char="*"))

# yields:
#    69.4
#    -  1.30 * Height
#    -  5.86 * Girth
#    + 0.135 * Height*Girth
</pre>


<h3>See Also</h3>

<p><code><a href="earth.html">earth</a></code>,
<code><a href="../../base/html/Extremes.html">pmax</a></code>,
</p>


<h3>Examples</h3>

<pre>
earth.mod &lt;- earth(Volume ~ ., data = trees)
cat(format(earth.mod))

# yields:
#    37.9
#    -  3.92 * h(16-Girth)
#    +   7.4 * h(Girth-16)
#    + 0.484 * h(Height-75)

cat(format(earth.mod, style="pmax")) # default formatting style prior to earth version 1.4

# yields:
#    37.9
#    -  3.92 * pmax(0,     16 -  Girth)
#    +   7.4 * pmax(0,  Girth -     16)
#    + 0.484 * pmax(0, Height -     75)

cat(format(earth.mod, style="C"))

# yields (note zero based indexing):
#  37.927
#    -  3.9187 * max(0,   16 - x[0])
#    +  7.4011 * max(0, x[0] -   16)
#    + 0.48411 * max(0, x[1] -   75)

cat(format(earth.mod, style="bf"))

# yields:
#    37.9
#    -  3.92 * bf1
#    +   7.4 * bf2
#    + 0.484 * bf3
#
#     bf1  h(16-Girth)
#     bf2  h(Girth-16)
#     bf3  h(Height-75)
</pre>

<hr /><div style="text-align: center;">[Package <em>earth</em> version 4.4.6 <a href="00Index.html">Index</a>]</div>
</body></html>
