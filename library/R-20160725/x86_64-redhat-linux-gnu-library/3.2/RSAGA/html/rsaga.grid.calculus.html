<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: SAGA Module Grid Calculus</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for rsaga.grid.calculus {RSAGA}"><tr><td>rsaga.grid.calculus {RSAGA}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>SAGA Module Grid Calculus</h2>

<h3>Description</h3>

<p>Perform Arithmetic Operations on Grids
</p>


<h3>Usage</h3>

<pre>
rsaga.grid.calculus(in.grids, out.grid, formula, env = rsaga.env(), ...)

rsaga.linear.combination(in.grids, out.grid, coef, cf.digits = 16,
  remove.zeros = FALSE, remove.ones = TRUE, env = rsaga.env(), ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>in.grids</code></td>
<td>
<p>input character vector: SAGA grid files (default file extension: <code>.sgrd</code>)</p>
</td></tr>
<tr valign="top"><td><code>out.grid</code></td>
<td>
<p>output: grid file resulting from the cell-by-cell application of 'formula' to the grids. Existing files will be overwritten!</p>
</td></tr>
<tr valign="top"><td><code>formula</code></td>
<td>
<p>character string of formula specifying the arithmetic operation to be performed on the <code>in.grids</code> (see Details); if this is a formula, only the right hand side will be used.</p>
</td></tr>
<tr valign="top"><td><code>env</code></td>
<td>
<p>RSAGA geoprocessing environment, generated by a call to <code><a href="rsaga.env.html">rsaga.env</a></code></p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>optional arguments to be passed to <code><a href="rsaga.geoprocessor.html">rsaga.geoprocessor</a></code></p>
</td></tr>
<tr valign="top"><td><code>coef</code></td>
<td>
<p>numeric: coefficient vector to be used for the linear combination of the <code>in.grids</code>. If <code>coef</code> as one more element than <code>in.grids</code>, the first one will be interpreted as an intercept.</p>
</td></tr>
<tr valign="top"><td><code>cf.digits</code></td>
<td>
<p>integer: number of digits used when converting the <code>coef</code>ficients to character strings (trailing zeros will be removed)</p>
</td></tr>
<tr valign="top"><td><code>remove.zeros</code></td>
<td>
<p>logical: if <code>TRUE</code>, terms (grids) with coefficient (numerically) equal to zero (after rounding to <code>cf.digits</code> digits) will be removed from the formula</p>
</td></tr>
<tr valign="top"><td><code>remove.ones</code></td>
<td>
<p>logical: if <code>TRUE</code> (th edefault), factors equal to 1 (after rounding to <code>cf.digits</code> digits) will be removed from the formula</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>in.grids</code> are represented in the <code>formula</code> by the letters <code>a</code> (for <code>in.grids[1]</code>), <code>b</code> etc. Thus, if <code>in.grids[1]</code> is Landsat TM channel 3 and <code>in.grids[2]</code> is channel 4, the NDVI formula (TM3-TM4)/(TM3+TM4) can be represented  by the character string <code>"(a-b)/(a+b)"</code> (any spaces are removed) or the formula <code>~(a-b)/(a+b)</code> in the <code>formula</code> argument.
</p>
<p>In addition to +, -, *, and /, the following operators and functions are available for the <code>formula</code> definition:
</p>

<ul>
<li> <p><i>^</i> power
</p>
</li>
<li> <p><code>sin(a)</code> sine
</p>
</li>
<li> <p><code>cos(a)</code> cosine
</p>
</li>
<li> <p><code>tan(a)</code> tangent
</p>
</li>
<li> <p><code>asin(a)</code> arc sine
</p>
</li>
<li> <p><code>acos(a)</code> arc cosine
</p>
</li>
<li> <p><code>atan(a)</code> arc tangent
</p>
</li>
<li> <p><code>atan2(a,b)</code> arc tangent of b/a
</p>
</li>
<li> <p><code>abs(a)</code> absolute value
</p>
</li>
<li> <p><code>int(a)</code> convert to integer
</p>
</li>
<li> <p><code>sqr(a)</code> square
</p>
</li>
<li> <p><code>sqrt(a)</code> square root
</p>
</li>
<li> <p><code>ln(a)</code> natural logarithm
</p>
</li>
<li> <p><code>log(a)</code> base 10 logarithm
</p>
</li>
<li> <p><code>mod(a,b)</code> modulo
</p>
</li>
<li> <p><code>gt(a, b)</code> returns 1 if a greater b
</p>
</li>
<li> <p><code>lt(a, b)</code> returns 1 if a lower b
</p>
</li>
<li> <p><code>eq(a, b)</code> returns 1 if a equal b
</p>
</li>
<li> <p><code>ifelse(switch, x, y)</code> returns x if switch equals 1 else y
</p>
</li></ul>

<p>Using <code>remove.zeros=FALSE</code> might have the side effect that no data areas in the grid with coefficient 0 are passed on to the results grid. (To be confirmed.)
</p>


<h3>Value</h3>

<p>The type of object returned depends on the <code>intern</code> argument passed to the <code><a href="rsaga.geoprocessor.html">rsaga.geoprocessor</a></code>. For <code>intern=FALSE</code> it is a numerical error code (0: success), or otherwise (the default) a character vector with the module's console output.
</p>


<h3>Author(s)</h3>

<p>Alexander Brenning (R interface), Olaf Conrad (SAGA module)
</p>


<h3>See Also</h3>

<p><code><a href="focal.function.html">local.function</a></code>, <code><a href="focal.function.html">focal.function</a></code>, and <code><a href="multi.focal.function.html">multi.focal.function</a></code> for a more flexible framework for combining grids or applying local and focal functions; <code><a href="rsaga.geoprocessor.html">rsaga.geoprocessor</a></code>, <code><a href="rsaga.env.html">rsaga.env</a></code>
</p>


<h3>Examples</h3>

<pre>
## Not run: 
# using SAGA grids:
# calculate the NDVI from Landsat TM bands 3 and 4:
rsaga.grid.calculus(c("tm3.sgrd","tm4.sgrd"), "ndvi.sgrd", ~(a-b)/(a+b))
# apply a linear regression equation to grids:
coefs = c(20,-0.6)
# maybe from a linear regression of mean annual air temperature (MAAT)
# against elevation - something like:
# coefs = coef( lm( maat ~ elevation ) )
rsaga.linear.combination("elevation.sgrd", "maat.sgrd", coefs)
# equivalent:
rsaga.grid.calculus("elevation.sgrd", "maat.sgrd", "20 - 0.6*a")

## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>RSAGA</em> version 0.94-5 <a href="00Index.html">Index</a>]</div>
</body></html>
