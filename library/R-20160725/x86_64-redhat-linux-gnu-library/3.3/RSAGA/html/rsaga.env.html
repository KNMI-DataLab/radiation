<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Set up the RSAGA Geoprocessing Environment</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for rsaga.env {RSAGA}"><tr><td>rsaga.env {RSAGA}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Set up the RSAGA Geoprocessing Environment</h2>

<h3>Description</h3>

<p><code>rsaga.env</code> creates a list with system-dependent information on SAGA path, module path and data  (working) directory. This kind of a list is required by most RSAGA geoprocessing functions and is referred to as the 'RSAGA geoprocessing environment.'
</p>


<h3>Usage</h3>

<pre>
rsaga.env(workspace = ".", cmd = ifelse(Sys.info()["sysname"] == "Windows",
  "saga_cmd.exe", "saga_cmd"), path, modules, version, cores,
  parallel = FALSE, check.libpath = TRUE, check.SAGA = TRUE,
  check.PATH = Sys.info()["sysname"] == "Windows", check.os.default = TRUE,
  os.default.path = rsaga.default.path(), lib.prefix)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>workspace</code></td>
<td>
<p>path of the working directory for SAGA; defaults to the current directory (<code>"."</code>).</p>
</td></tr>
<tr valign="top"><td><code>cmd</code></td>
<td>
<p>name of the SAGA command line program; defaults to <code>saga_cmd.exe</code>, its name under Windows</p>
</td></tr>
<tr valign="top"><td><code>path</code></td>
<td>
<p>path in which to find <code>cmd</code>; <code>rsaga.env</code> is usually able to find SAGA on your system if it is installed; see Details.</p>
</td></tr>
<tr valign="top"><td><code>modules</code></td>
<td>
<p>path in which to find SAGA libraries; see Details</p>
</td></tr>
<tr valign="top"><td><code>version</code></td>
<td>
<p>optional character string: SAGA GIS (API) version, e.g. <code>"2.0.8"</code>; if missing, a call to <code><a href="rsaga.get.version.html">rsaga.get.version</a></code> is used to determine version number of SAGA API</p>
</td></tr>
<tr valign="top"><td><code>cores</code></td>
<td>
<p>optional numeric argument, or <code>NA</code>: number of cores used by SAGA GIS; supported only by SAGA GIS 2.1.0 (and higher), ignored otherwise (with a warning). Multicore-enabled SAGA GIS modules such as the one used by <code><a href="rsaga.pisr.html">rsaga.pisr</a></code> seem to run in multicore mode by default when this argument is not specified, therefore <code>cores</code> should only be specified to use a smaller number of cores than available on a machine.</p>
</td></tr>
<tr valign="top"><td><code>parallel</code></td>
<td>
<p>optional logical argument (default: <code>FALSE</code>): if <code>TRUE</code>, run RSAGA functions that are capable of parallel processing in parallel mode; note that this is completely independent of the behaviour of SAGA GIS (which can be controlled using the <code>cores</code> argument); currently only some RSAGA functions support parallel processing (e.g., <code><a href="pick.from.points.html">pick.from.ascii.grid</a></code> or <code><a href="rsaga.get.modules.html">rsaga.get.modules</a></code>). <code>parallel=TRUE</code> requires that a parallel backend such as <span class="pkg">doSNOW</span> or <span class="pkg">doMC</span> is available and has been started prior to calling any parallelized RSAGA function, otherwise warnings may be generated</p>
</td></tr>
<tr valign="top"><td><code>check.libpath</code></td>
<td>
<p>if <code>TRUE</code> (default), first look for SAGA GIS in the folder where the RSAGA package is installed</p>
</td></tr>
<tr valign="top"><td><code>check.SAGA</code></td>
<td>
<p>if <code>TRUE</code> (default), next check the path given by the environment variable <code>SAGA</code>, if it exists</p>
</td></tr>
<tr valign="top"><td><code>check.PATH</code></td>
<td>
<p>if <code>TRUE</code> (default on Windows), next look for SAGA GIS in all the paths in the <code>PATH</code> environment variable; defaults to <code>FALSE</code> on non-Windows OS</p>
</td></tr>
<tr valign="top"><td><code>check.os.default</code></td>
<td>
<p>if <code>TRUE</code>, look for SAGA GIS in the folder specified by <code>os.default.path</code>.</p>
</td></tr>
<tr valign="top"><td><code>os.default.path</code></td>
<td>
<p>on Windows, <code>C:/Progra~1/SAGA-GIS</code>; on unix, an attempt is made to locate <code>saga_cmd</code></p>
</td></tr>
<tr valign="top"><td><code>lib.prefix</code></td>
<td>
<p>character string: a possible (platform-dependent) prefix for SAGA GIS library names; if missing (recommended), a call to <code><a href="rsaga.lib.prefix.html">rsaga.lib.prefix</a></code> tries to determine the correct prefix, e.g. <code>""</code> on Windows systems and <code>"lib"</code> on non-Windows systems with SAGA GIS pre-2.1.0. Try specifying <code>""</code> or <code>"lib"</code> manually if this causes problems, and contact the package maintainer if the detection mechanism fails on your system (indicate your <code>Sys.info()["sysname"]</code> and your SAGA GIS version)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>IMPORTANT: Unlike R functions such as <code><a href="../../base/html/options.html">options</a></code>,  which changes and saves settings somewhere in a global variable, <code><a href="rsaga.env.html">rsaga.env</a></code> does not actually 'save' any settings, it simply creates a list that can (and has to) be passed to other <code>rsaga.*</code> functions. See example below.
</p>
<p>I strongly recommend to install SAGA GIS in <code>"C:/Program Files/SAGA-GIS"</code>  in the case of English-language Windows platforms (the equivalent non-English installation folder in the case of non-English Windows versions seems to work as well). If this is the only SAGA GIS copy on the computer and you do <em>not</em> define a Windows environment variable <code>SAGA</code>, then RSAGA should normally be able to find your SAGA GIS installation in this folder.
</p>
<p><code>rsaga.env</code> tries to collect infromation on the (R)SAGA environment. If <code>path</code> is missing, <code>rsaga.env</code> first looks for an environment variable <code>SAGA</code>; if this is undefined, it checks the current working directory, then the paths given in the PATH environment variable, and finally the function's guess is <code>"C:/Progra~1/SAGA-GIS"</code> (or <code>"/usr/local/bin"</code> on non-Windows systems).
</p>
<p>The default <code>modules</code> folder on Windows systems is the  <code>modules</code> subfolder of the SAGA binaries' folder. The <code>SAGA_MLB</code> environment variable is <em>not</em> checked by <code>rsaga.env</code>.
</p>
<p>On Unix (and Mac OS X) systems, the default <code>modules</code> folder is as specified in the <code>SAGA_MLB</code> environment variable. If this is empty / not set, then the following backup path is used. If <code>path</code> ends with &quot;/bin&quot;, then &quot;/bin&quot; is changed to &quot;/lib/saga&quot; and taken as the <code>modules</code> path; otherwise, <code>/usr/local/lib/saga</code> is used.
</p>


<h3>Value</h3>

<p>A list with components <code>workspace</code>, <code>cmd</code>, <code>path</code>, <code>modules</code>, <code>version</code>, <code>cores</code> and <code>parallel</code> with values as passed to <code>rsaga.env</code> or default values as described in the Details section.
</p>


<h3>Note</h3>

<p>Note that the default <code>workspace</code> is <code>"."</code>, not <code>getwd()</code>; i.e. the default SAGA workspace folder is not fixed, it changes each time you change the R working directory using <code>setwd</code>.
</p>


<h3>Author(s)</h3>

<p>Alexander Brenning
</p>


<h3>See Also</h3>

<p><code><a href="rsaga.get.version.html">rsaga.get.version</a></code>
</p>


<h3>Examples</h3>

<pre>
## Not run: 
# Check the default RSAGA environment on your computer:
myenv &lt;- rsaga.env()
myenv
# SAGA data in C:/sagadata, binaries in C:/SAGA-GIS, modules in C:/SAGA-GIS/modules:
myenv &lt;- rsaga.env(workspace="C:/sagadata", path="C:/SAGA-GIS")
# Unix: SAGA in /usr/bin (instead of the default /usr/local/bin),
# and modules in /use/lib/saga:
# myenv &lt;- rsaga.env(path="/usr/bin")
# Use the 'myenv' environment for SAGA geoprocessing:
rsaga.hillshade("dem","hillshade",env=myenv)
# ...creates (or overwrites) grid "C:/sagadata/hillshade.sgrd"
# derived from digital elevation model "C:/sagadata/dem.sgrd"

# Same calculation with different SAGA version:
# (I keep several versions in SAGA-GIS_2.0.x folders:)
myenv05 = rsaga.env(path = "C:/Progra~1/SAGA-GIS_2.0.5")
rsaga.hillshade("dem","hillshade205",env=myenv05)

## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>RSAGA</em> version 0.94-5 <a href="00Index.html">Index</a>]</div>
</body></html>
